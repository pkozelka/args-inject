<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Petr Kozelka" />
    <meta name="Date-Revision-yyyymmdd" content="20140913" />
    <meta http-equiv="Content-Language" content="en" />
    <title>args-inject - MiniCalc Sample</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.1.min.js"></script>

                          
        
<link rel="stylesheet" type="text/css" href="http://alexgorbatchev.com/pub/sh/current/styles/shCore.css" media="all"/>
                      
        
<link rel="stylesheet" type="text/css" href="http://alexgorbatchev.com/pub/sh/current/styles/shThemeDefault.css" media="all"/>
                      
        
<style>#bodyColumn { max-width: 840px }
        .syntaxhighlighter {
        border: 1px dotted silver;
        padding: 12px;
        }</style>
                      
        
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shCore.js" language="javaScript"></script>
                      
        
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushJava.js" language="javaScript"></script>
                      
        
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushXml.js" language="javaScript"></script>
                      
        
<script language="javascript">SyntaxHighlighter.defaults['light'] = true;
        SyntaxHighlighter.all();</script>
          
                  </head>
        <body class="topBarEnabled">
          
                        
                    
                

    <div id="topbar" class="navbar navbar-fixed-top navbar-inverse">
      <div class="navbar-inner">
                                  <div class="container"><div class="nav-collapse">
            
                
                                            <a class="brand" href="http://code.kozelka.net/index.html"  title="code.kozelka.net">

                                
                                    code
                
                </a>
                    
                                <ul class="nav">
                          <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">args-inject <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="index.html"  title="Introduction">Introduction</a>
</li>
                  
                      <li>      <a href="Features.html"  title="Features">Features</a>
</li>
                  
                      <li>      <a href="Comparison.html"  title="Comparison">Comparison</a>
</li>
                  
                      <li>      <a href="Tutorial.html"  title="Tutorial">Tutorial</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li class="dropdown-submenu">
                                      <a href="Design.html"  title="Model">Model</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="Subcommands.html"  title="Subcommands">Subcommands</a>
</li>
                                  <li>      <a href="Options.html"  title="Options">Options</a>
</li>
                                  <li>      <a href="Params.html"  title="Params">Params</a>
</li>
                              </ul>
            </li>
                  
                      <li class="dropdown-submenu">
                                      <a href="Samples.html"  title="Samples">Samples</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="MiniCalc.html"  title="MiniCalc">MiniCalc</a>
</li>
                                  <li>      <a href="MyPathTool.html"  title="MyPathTool">MyPathTool</a>
</li>
                                  <li>      <a href="Timmy.html"  title="Timmy">Timmy</a>
</li>
                              </ul>
            </li>
                  
                      <li>      <a href="CliTypes.html"  title="CLI types">CLI types</a>
</li>
                  
                      <li>      <a href="Varargs.html"  title="Varargs">Varargs</a>
</li>
                  
                      <li>      <a href="HelpCommand.html"  title="Embedded help">Embedded help</a>
</li>
                  
                      <li>      <a href="MainEntryPoint.html"  title="Writing main() method">Writing main() method</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Hacking <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="Design.html"  title="Design">Design</a>
</li>
                  
                      <li>      <a href="CustomParser.html"  title="Writing custom parser">Writing custom parser</a>
</li>
                  
                      <li>      <a href="CustomAnalyzer.html"  title="Writing declaration analyzer">Writing declaration analyzer</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li class="dropdown-submenu">
                                      <a href="project-info.html"  title="Project Information">Project Information</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="dependencies.html"  title="Dependencies">Dependencies</a>
</li>
                                  <li>      <a href="team-list.html"  title="Project Team">Project Team</a>
</li>
                                  <li>      <a href="plugins.html"  title="Project Plugins">Project Plugins</a>
</li>
                                  <li>      <a href="issue-tracking.html"  title="Issue Tracking">Issue Tracking</a>
</li>
                                  <li>      <a href="license.html"  title="Project License">Project License</a>
</li>
                                  <li>      <a href="source-repository.html"  title="Source Repository">Source Repository</a>
</li>
                                  <li>      <a href="project-summary.html"  title="Project Summary">Project Summary</a>
</li>
                              </ul>
            </li>
                  
                      <li class="dropdown-submenu">
                                      <a href="project-reports.html"  title="Project Reports">Project Reports</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="surefire-report.html"  title="Surefire Report">Surefire Report</a>
</li>
                                  <li>      <a href="cobertura/index.html"  title="Cobertura Test Coverage">Cobertura Test Coverage</a>
</li>
                                  <li>      <a href="findbugs.html"  title="FindBugs Report">FindBugs Report</a>
</li>
                                  <li>      <a href="pmd.html"  title="PMD">PMD</a>
</li>
                                  <li>      <a href="cpd.html"  title="CPD">CPD</a>
</li>
                                  <li>      <a href="xref/index.html"  title="Source Xref">Source Xref</a>
</li>
                                  <li>      <a href="xref-test/index.html"  title="Test Source Xref">Test Source Xref</a>
</li>
                                  <li>      <a href="apidocs/index.html"  title="JavaDocs">JavaDocs</a>
</li>
                                  <li>      <a href="testapidocs/index.html"  title="Test JavaDocs">Test JavaDocs</a>
</li>
                                  <li>      <a href="changes-report.html"  title="Changes Report">Changes Report</a>
</li>
                              </ul>
            </li>
                          </ul>
      </li>
                  </ul>
          
          
                                              
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

        <ul class="nav pull-right"><li style="margin-top: 10px;">
    
    <div class="g-plusone" data-href="http://code.kozelka.net/args-inject" data-size="medium"  width="60px" align="right" ></div>

        </li></ul>
                                            
                               <ul class="nav pull-right">
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">External Links <b class="caret"></b></a>
                <ul class="dropdown-menu">
                      <li>      <a href="https://github.com/pkozelka/args-inject"  title="Fork me on GitHub">Fork me on GitHub</a>
</li>
      <li>      <a href="http://www.apache.org/"  title="Apache">Apache</a>
</li>
      <li>      <a href="http://maven.apache.org/"  title="Maven 2">Maven 2</a>
</li>
                  </ul>
              </li>
            </ul>
          
                      </div>
          
        </div>
      </div>
    </div>
    
        <div class="container">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2></h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                              <li class="">
                    <a href="index.html" title="args-inject">
        args-inject</a>
                    <span class="divider">»</span>
      </li>
        <li class="active ">MiniCalc Sample</li>
        
                
                    
                  <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2014-09-13</li>
              <li id="projectVersion" class="pull-right">
                    Version: 1-SNAPSHOT
        </li>
            
                            </ul>
      </div>

      
                        
        <div id="bodyColumn" >
                                  
            <div class="section">
<h2>MiniCalc Sample<a name="MiniCalc_Sample"></a></h2>
<p>Implements a small commandline application with two subcommands</p>
<ul>
<li><b>plus</b> gets variable number of integer arguments and computes their sum</li>
<li><b>minus</b> gets two integer arguments and computes their difference</li></ul>
<p>The whole implementation is trivial that it can be stored in a single java file; but I have split it for better readability. </p>
<p>Demonstrates:</p>
<ul>
<li>using variable parameter list (<tt>plus</tt>)</li>
<li>working with floating-point values</li></ul>
<p>Files:</p>
<ul>
<li><a href="#MiniCalc.java">MiniCalc.java</a>
<ul>
<li><a href="#minicalc_help">minicalc help</a></li></ul></li>
<li><a href="#Plus.java">Plus.java</a>
<ul>
<li><a href="#minicalc_help_plus">minicalc help plus</a></li></ul></li>
<li><a href="#Minus.java">Minus.java</a>
<ul>
<li><a href="#minicalc_help_minus">minicalc help minus</a></li></ul></li>
<li><a href="#Logarithm.java">Logarithm.java</a>
<ul>
<li><a href="#minicalc_help_log">minicalc help log</a></li></ul></li></ul>
<div class="section">
<h3>MiniCalc.java<a name="MiniCalc.java"></a></h3><pre class="brush: java">package net.kozelka.args.minicalc;

import net.kozelka.args.BasicArgsParser;
import net.kozelka.args.DefaultHelpCommand;
import net.kozelka.args.annotation.AnnottationAwareSetup;

/**
 * Sample application for &lt;a href=&quot;http://code.kozelka.net/args-inject&quot;&gt;args-inject&lt;/a&gt;
 * @author &lt;a href=&quot;mailto:pkozelka@gmail.com&quot;&gt;Petr Kozelka&lt;/a&gt;
 */
public class MiniCalc {

    // START SNIPPET: run
    /**
     * Highest-possible level of invocation usable both from {@link #main} and from unit tests.
     *
     * @param args commandline arguments
     * @return true if successful
     * @throws Exception -
     */
    static int run(String... args) throws Exception {
        final AnnottationAwareSetup setup = new AnnottationAwareSetup(&quot;minicalc&quot;);
        setup.addSubCommand(DefaultHelpCommand.class);
        setup.addSubCommand(Plus.class);
        setup.addSubCommand(Minus.class);
        setup.addSubCommand(Logarithm.class);
        return BasicArgsParser.process(setup, args);
    }
    // END SNIPPET: run

    // START SNIPPET: main
    public static void main(String[] args) throws Exception {
        final int exitCode = run(args);
        if (exitCode != 0) {
            System.exit(exitCode);
        }
    }
    // END SNIPPET: main
}
</pre>
<div class="section">
<h4>minicalc help<a name="minicalc_help"></a></h4>
<div class="source">
<pre>Usage:
   minicalc &lt;subcommand&gt; [options] [args]

Available subcommands:
   help     shows help for the whole app. or for specified command
   log      computes logarithm of given argument
   minus    computes operand1 - operand2
   plus     computes sum of all given numbers

Type 'minicalc help &lt;subcommand&gt;' for help on a specific subcommand
</pre></div></div></div>
<div class="section">
<h3>Plus.java<a name="Plus.java"></a></h3><pre class="brush: java">package net.kozelka.args.minicalc;

import net.kozelka.args.annotation.SubCommand;
import net.kozelka.args.api.ArgsCommand;

@SubCommand(name = &quot;plus&quot;, description = &quot;computes sum of all given numbers&quot;)
public class Plus implements ArgsCommand {
    private final int[] numbers;

    public Plus(int... numbers) {
        this.numbers = numbers;
    }

    public Integer call() throws Exception {
        int sum = 0;
        for (int number : numbers) {
            sum += number;
        }
        System.out.println(sum);
        return 0;
    }
}
</pre>
<div class="section">
<h4>minicalc help plus<a name="minicalc_help_plus"></a></h4>
<div class="source">
<pre>Subcommand 'plus': computes sum of all given numbers

Usage:
   minicalc plus [options] &lt;int...&gt;
</pre></div></div></div>
<div class="section">
<h3>Minus.java<a name="Minus.java"></a></h3><pre class="brush: java">package net.kozelka.args.minicalc;

import net.kozelka.args.annotation.Param;
import net.kozelka.args.annotation.SubCommand;
import net.kozelka.args.api.ArgsCommand;

@SubCommand(name = &quot;minus&quot;, description = &quot;computes operand1 - operand2&quot;)
public class Minus implements ArgsCommand {
    private final int x;
    private final int y;

    public Minus(@Param(&quot;operand1&quot;) int x, @Param(&quot;operand2&quot;) int y) {
        this.x = x;
        this.y = y;
    }

    public Integer call() throws Exception {
        System.out.println(x - y);
        return 0;
    }
}
</pre>
<div class="section">
<h4>minicalc help minus<a name="minicalc_help_minus"></a></h4>
<div class="source">
<pre>Subcommand 'minus': computes operand1 - operand2

Usage:
   minicalc minus [options] &lt;operand1&gt; &lt;operand2&gt;
</pre></div></div></div>
<div class="section">
<h3>Logarithm.java<a name="Logarithm.java"></a></h3><pre class="brush: java">package net.kozelka.args.minicalc;

import net.kozelka.args.annotation.Option;
import net.kozelka.args.annotation.Param;
import net.kozelka.args.annotation.SubCommand;
import net.kozelka.args.api.ArgsCommand;

@SubCommand(name = &quot;log&quot;, description = &quot;computes logarithm of given argument&quot;)
public class Logarithm implements ArgsCommand {
    private final double x;
    private double base = 0;

    public Logarithm(@Param(&quot;arg&quot;) double x) {
        this.x = x;
    }

    @Option(longName = &quot;--base&quot;, shortName = &quot;-b&quot;, description = &quot;the base of the logarithm&quot;)
    public void setBase(@Param(&quot;base&quot;) double base) {
        this.base = base;
    }

    public Integer call() throws Exception {
        final double rv;
        if (base == 0) {
            // natural logarithm
            rv = Math.log(x);
        } else if (base == 10) {
            rv = Math.log10(x);
        } else {
            rv = Math.log(x) / Math.log(base);
        }
        System.out.println(rv);
        return 0;
    }
}
</pre>
<div class="section">
<h4>minicalc help log<a name="minicalc_help_log"></a></h4>
<div class="source">
<pre>Subcommand 'log': computes logarithm of given argument

Usage:
   minicalc log [options] &lt;arg&gt;

Valid options:
   -b [--base] &lt;base&gt;  the base of the logarithm
</pre></div></div></div></div>
                  </div>
          </div>

    <hr/>

    <footer>
            <div class="container">
                      <div class="row">
                              <p >Copyright &copy;                    2014
                        <a href="http://kozelka.net">Petr Kozelka</a>.
            All rights reserved.      
                    
      </p>
        </div>

        
                <p id="poweredBy" class="pull-right">
                          <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
              </p>
        
                </div>
    </footer>
        </body>
</html>
